<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Advanced Usage of Tool Sandbox" href="sandbox_advanced.html" /><link rel="prev" title="3. Quick Start" href="quickstart.html" />
        <link rel="prefetch" href="../_static/logo.svg" as="image" />

    <link rel="shortcut icon" href="../_static/logo.svg"/><!-- Generated with Sphinx 7.4.7 and Furo 2025.07.19 -->
        <title>4. Tool Sandbox - AgentScope Runtime</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c5949056" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  --color-brand-primary: #2196f3;
  --color-brand-content: #2196f3;
  --color-admonition-background: #f8f9fa;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #64b5f6;
  --color-brand-content: #64b5f6;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #64b5f6;
  --color-brand-content: #64b5f6;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="intro.html"><div class="brand"><span style='font-weight: 700; color: #2196f3;'>AgentScope</span> <span style='font-weight: 900; color: #ff5722;'>Runtime</span></div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="intro.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/logo.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text"><span style='font-weight: 700; color: #2196f3;'>AgentScope</span> <span style='font-weight: 900; color: #ff5722;'>Runtime</span></span>
  
</a><div class="language-switch">
    <div class="language-selector">
        <button class="language-button" onclick="toggleLanguageMenu()">
            <span id="current-lang">English</span>
            <span class="dropdown-arrow"></span>
        </button>
        <div class="language-menu" id="language-menu">
            <a href="#" class="language-option" onclick="switchLanguage('en')">English</a>
            <a href="#" class="language-option" onclick="switchLanguage('zh')">中文</a>
        </div>
    </div>
</div>

<script>
    function toggleLanguageMenu() {
        const menu = document.getElementById('language-menu');
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    }

    function switchLanguage(lang, skipRedirect = false) {
        // Save language preference
        localStorage.setItem('preferred-language', lang);

        // Update displayed language const
        currentLang = document.getElementById('current-lang');
        currentLang.textContent = lang === 'zh' ? '中文' : 'English';
        document.body.setAttribute('data-current-lang', lang);
        if (!skipRedirect) {
            const currentPath = window.location.pathname;
            let newPath = null;

            if (lang === 'zh' && currentPath.includes('/en/')) {
                newPath = currentPath.replace('/en/', '/zh/');
            } else if (lang === 'en' && currentPath.includes('/zh/')) {
                newPath = currentPath.replace('/zh/', '/en/');
            }
            if (newPath && newPath !== currentPath) {
                window.location.href = newPath + window.location.search + window.location.hash;
                return;
            }
        }

        // Apply language filtering
        filterContentByLanguage(lang);

        // Close dropdown menu
        document.getElementById('language-menu').style.display = 'none';
    }

    function filterContentByLanguage(lang) {
        const captions = document.querySelectorAll('.caption');
        const toctreeItems = document.querySelectorAll('.toctree-l1');

        // Define which captions should be displayed based on the selected language
        const languageMapping = {
            'en': ['Tutorial', 'API Reference' ],
            'zh': ['简介', '教程', 'API 参考']
        };

        const visibleCaptions = languageMapping[lang] || [];

        // Filter captions based on the selected language
        captions.forEach(caption => {
            const text = caption.textContent.trim();
            caption.style.display = visibleCaptions.includes(text) ? 'block' : 'none';
        });

        // Filter toctree items based on the selected language
        toctreeItems.forEach(item => {
            const link = item.querySelector('a');
            if (link) {
                const href = link.getAttribute('href') || '';
                if (lang === 'zh') {
                    const hasZh = href.includes('/zh/');
                    const hasEn = href.includes('/en/');
                    const isRelative = !href.startsWith('http') && !href.startsWith('/') && !hasEn;

                    item.style.display = (hasZh || isRelative) ? 'block' : 'none';
                } else {
                    const hasZh = href.includes('/zh/');
                    item.style.display = hasZh ? 'none' : 'block';
                }
            } else {
                item.style.display = 'block';
            }
        });
    }

    document.addEventListener('click', function (e) {
        if (!e.target.closest('.language-selector')) {
            document.getElementById('language-menu').style.display = 'none';
        }
    });
</script><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="concept.html">2. Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">3. Quick Start</a></li>
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#">4. Tool Sandbox</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 4. Tool Sandbox</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="sandbox_advanced.html">Advanced Usage of Tool Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="training_sandbox.html">Training Sandbox</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="react_agent.html">5. Deploy a ReAct Agent with Tool Sandbox</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="protocol.html">6. Agent API Protocol Specification</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 6. Agent API Protocol Specification</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="a2a_support.html">A2A Protocol Support Documentation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="manager.html">7. Manager Module</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 7. Manager Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="context_manager.html">Context Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment_manager.html">Environment Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rag.html">8. RAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">9. Tracing Method Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="demohouse.html">10. Demo House</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="contribute.html">11. How to Contribute</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 11. How to Contribute</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="README.html">Contribute to Cookbook</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="api/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="api/sandbox.html">Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/engine.html">Engine</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">简介</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zh/intro.html">0. 介绍</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zh/install.html">1. 安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/concept.html">2. 概念</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/quickstart.html">3. 快速开始</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/sandbox.html">4. 工具沙箱</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 4. 工具沙箱</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/sandbox_advanced.html">工具沙箱高级用法</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zh/training_sandbox.html">训练用沙箱</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../zh/react_agent.html">5. 部署配备工具沙箱的ReAct智能体</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/protocol.html">6. Agent API 协议规范</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 6. Agent API 协议规范</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/a2a_support.html">A2A 协议支持文档</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/manager.html">7. 管理器模块（Manager Module）</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 7. 管理器模块（Manager Module）</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/context_manager.html">上下文管理器 (Context Manager)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zh/environment_manager.html">环境管理器（Environment Manager）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../zh/rag.html">8. RAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/tracing.html">9. 执行轨迹追踪</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/demohouse.html">10. Demo 展示厅</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/contribute.html">11. 如何贡献</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 11. 如何贡献</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/README.html">参与贡献Cookbook</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API 参考</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/api/index.html">API 参考</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of API 参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/api/sandbox.html">Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zh/api/engine.html">Engine</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/agentscope-ai/agentscope-runtime/blob/main/cookbook/en/sandbox.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="tool-sandbox">
<h1><span class="section-number">4. </span>Tool Sandbox<a class="headerlink" href="#tool-sandbox" title="Link to this heading">¶</a></h1>
<p>AgentScope Runtime’s Sandbox is a versatile tool that provides a <strong>secure</strong> and <strong>isolated</strong> environment for a wide range of operations, including tool execution, browser automation, and file system operations. This tutorial will empower you to set up the tool sandbox dependency and run tools in an environment that you can tailor to your specific needs.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current sandbox environment utilizes Docker for default isolation. In addition, we offer support for Kubernetes (K8s) as a remote service backend. Looking ahead, we plan to incorporate more third-party hosting solutions in future releases.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For <strong>Apple Silicon devices</strong> (such as M1/M2), we recommend the following options to run an <strong>x86</strong> Docker environment for maximum compatibility:</p>
<ul class="simple">
<li><p>Docker Desktop: Please refer to the <a class="reference external" href="https://docs.docker.com/desktop/setup/install/mac-install/">Docker Desktop installation guide</a> to enable Rosetta 2, ensuring compatibility with x86_64 images.</p></li>
<li><p>Colima: Ensure that Rosetta 2 support is enabled. You can start <a class="reference external" href="https://github.com/abiosoft/colima">Colima</a> with the following command to achieve compatibility: <code class="docutils literal notranslate"><span class="pre">colima</span> <span class="pre">start</span> <span class="pre">--vm-type=vz</span> <span class="pre">--vz-rosetta</span> <span class="pre">--memory</span> <span class="pre">8</span> <span class="pre">--cpu</span> <span class="pre">1</span></code></p></li>
</ul>
</div>
<ul class="simple">
<li><p>Docker</p></li>
<li><p>(Optional,  remote mode only) Kubernetes</p></li>
</ul>
</section>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Link to this heading">¶</a></h2>
<section id="install-dependencies">
<h3>Install Dependencies<a class="headerlink" href="#install-dependencies" title="Link to this heading">¶</a></h3>
<p>First, install AgentScope Runtime with sandbox support:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;agentscope-runtime[sandbox]&quot;</span>
</pre></div>
</div>
</section>
<section id="prepare-the-docker-images">
<h3>Prepare the Docker Images<a class="headerlink" href="#prepare-the-docker-images" title="Link to this heading">¶</a></h3>
<p>The sandbox uses different Docker images for various functionalities. You can pull only the images you need or all of them for complete functionality:</p>
<section id="option-1-pull-all-images-recommended">
<h4>Option 1: Pull All Images (Recommended)<a class="headerlink" href="#option-1-pull-all-images-recommended" title="Link to this heading">¶</a></h4>
<p>To ensure a complete sandbox experience with all features enabled, follow the steps below to pull and tag the necessary Docker images from our repository:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Image Source: Alibaba Cloud Container Registry</strong></p>
<p>All Docker images are hosted on Alibaba Cloud Container Registry (ACR) for optimal performance and reliability worldwide. Images are pulled from ACR and tagged with standard names for seamless integration with the AgentScope runtime environment.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Base image</span>
docker<span class="w"> </span>pull<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-base:latest<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>tag<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-base:latest<span class="w"> </span>agentscope/runtime-sandbox-base:latest

<span class="c1"># Filesystem image</span>
docker<span class="w"> </span>pull<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-filesystem:latest<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>tag<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-filesystem:latest<span class="w"> </span>agentscope/runtime-sandbox-filesystem:latest

<span class="c1"># Browser image</span>
docker<span class="w"> </span>pull<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-browser:latest<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>tag<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-browser:latest<span class="w"> </span>agentscope/runtime-sandbox-browser:latest
</pre></div>
</div>
</section>
<section id="option-2-pull-specific-images">
<h4>Option 2: Pull Specific Images<a class="headerlink" href="#option-2-pull-specific-images" title="Link to this heading">¶</a></h4>
<p>Choose the images based on your specific needs:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Image</p></th>
<th class="head"><p>Purpose</p></th>
<th class="head"><p>When to Use</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Base Image</strong></p></td>
<td><p>Python code execution, shell commands</p></td>
<td><p>Essential for basic tool execution</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Filesystem Image</strong></p></td>
<td><p>File system operations</p></td>
<td><p>When you need file read/write/management</p></td>
</tr>
<tr class="row-even"><td><p><strong>Browser Image</strong></p></td>
<td><p>Web browser automation</p></td>
<td><p>When you need web scraping or browser control</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Training Image</strong></p></td>
<td><p>Training and evaluating agent</p></td>
<td><p>Used for training and evaluating agent on some benchmark (see <a class="reference internal" href="training_sandbox.html"><span class="doc">Training Sandbox</span></a> for details)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="verify-installation">
<h3>Verify Installation<a class="headerlink" href="#verify-installation" title="Link to this heading">¶</a></h3>
<p>You can verify that everything is set up correctly by calling <code class="docutils literal notranslate"><span class="pre">run_ipython_cell</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox.tools.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_ipython_cell</span>

<span class="c1"># Model Context Protocol (MCP)-compatible tool call results</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_ipython_cell</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;print(&#39;Setup successful!&#39;)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="optional-built-the-docker-images-from-scratch">
<h3>(Optional) Built the Docker Images from Scratch<a class="headerlink" href="#optional-built-the-docker-images-from-scratch" title="Link to this heading">¶</a></h3>
<p>If you prefer to build the Docker images yourself or need custom modifications, you can build them from scratch. Please refer to <a class="reference internal" href="sandbox_advanced.html"><span class="doc">Advanced Usage of Tool Sandbox</span></a> for detailed instructions.</p>
</section>
</section>
<section id="tool-usage">
<h2>Tool Usage<a class="headerlink" href="#tool-usage" title="Link to this heading">¶</a></h2>
<section id="call-a-tool">
<h3>Call a Tool<a class="headerlink" href="#call-a-tool" title="Link to this heading">¶</a></h3>
<p>The most basic usage is to directly call built-in tools (such as running Python code or shell commands):</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following two functions will execute independently in separate sandboxes.
Each function call will start an <strong>embedded</strong> sandbox, execute the function within it, and then close the sandbox. The lifecycle of each sandbox is confined to the duration of the function call in this way.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox.tools.base</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">run_ipython_cell</span><span class="p">,</span>
    <span class="n">run_shell_command</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">run_ipython_cell</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;print(&#39;hello world&#39;)&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">run_shell_command</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;whoami&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="bind-sandbox-to-a-tool">
<h3>Bind Sandbox to a Tool<a class="headerlink" href="#bind-sandbox-to-a-tool" title="Link to this heading">¶</a></h3>
<p>In addition to directly calling tools, you can bind a specific sandbox to a tool using the bind method. This allows you to specify which sandbox the function will run in, giving you more control over the execution environment. It’s important to note that the function’s type and the sandbox type must match; otherwise, the function will not execute properly. Here’s how you can do it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSandbox</span>

<span class="k">with</span> <span class="n">BaseSandbox</span><span class="p">()</span> <span class="k">as</span> <span class="n">sandbox</span><span class="p">:</span>
    <span class="c1"># Ensure the function&#39;s sandbox type matches the sandbox instance type</span>
    <span class="k">assert</span> <span class="n">run_ipython_cell</span><span class="o">.</span><span class="n">sandbox_type</span> <span class="o">==</span> <span class="n">sandbox</span><span class="o">.</span><span class="n">sandbox_type</span>

    <span class="c1"># Bind the sandbox to the tool functions</span>
    <span class="n">func1</span> <span class="o">=</span> <span class="n">run_ipython_cell</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">sandbox</span><span class="o">=</span><span class="n">sandbox</span><span class="p">)</span>
    <span class="n">func2</span> <span class="o">=</span> <span class="n">run_shell_command</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">sandbox</span><span class="o">=</span><span class="n">sandbox</span><span class="p">)</span>

    <span class="c1"># Execute the function within the sandbox</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">func1</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;repo = &#39;agentscope-runtime&#39;&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">func1</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;print(repo)&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">func2</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;whoami&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="convert-mcp-server-to-tools">
<h3>Convert MCP Server to Tools<a class="headerlink" href="#convert-mcp-server-to-tools" title="Link to this heading">¶</a></h3>
<p>You can also integrate external MCP servers to extend the tools. This example demonstrates how to convert MCP server configurations into built-in tools using the <code class="docutils literal notranslate"><span class="pre">MCPConfigConverter</span></code> class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox.tools.mcp_tool</span><span class="w"> </span><span class="kn">import</span> <span class="n">MCPConfigConverter</span>

<span class="n">mcp_tools</span> <span class="o">=</span> <span class="n">MCPConfigConverter</span><span class="p">(</span>
    <span class="n">server_configs</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;mcpServers&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;uvx&quot;</span><span class="p">,</span>
                <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;mcp-server-time&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;--local-timezone=America/New_York&quot;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_builtin_tools</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mcp_tools</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="function-tool">
<h3>Function Tool<a class="headerlink" href="#function-tool" title="Link to this heading">¶</a></h3>
<p>Besides the tools that run in sandbox environments, you can also add in-process functions as tools for agents. These function tools execute directly within the current Python process without requiring sandbox isolation, making them suitable for lightweight operations and calculations.</p>
<p>Function tools offer two creation methods:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">FunctionTool</span></code> wrapper</strong>: Wrap existing functions or methods using the <code class="docutils literal notranslate"><span class="pre">FunctionTool</span></code> class</p></li>
<li><p><strong>Decorator approach</strong>: Use the <code class="docutils literal notranslate"><span class="pre">&#64;function_tool</span></code> decorator to annotate functions directly</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox.tools.function_tool</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">FunctionTool</span><span class="p">,</span>
    <span class="n">function_tool</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MathCalculator</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_power</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">exponent</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate the power of a number.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calculating </span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">^</span><span class="si">{</span><span class="n">exponent</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">base</span><span class="o">**</span><span class="n">exponent</span>


<span class="n">calculator</span> <span class="o">=</span> <span class="n">MathCalculator</span><span class="p">()</span>


<span class="nd">@function_tool</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;calculate_power&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Calculate the base raised to the power of the exponent&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">another_calculate_power</span><span class="p">(</span><span class="n">base</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">exponent</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the base raised to the power of the exponent.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calculating </span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">^</span><span class="si">{</span><span class="n">exponent</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">base</span><span class="o">**</span><span class="n">exponent</span>


<span class="n">tool_0</span> <span class="o">=</span> <span class="n">FunctionTool</span><span class="p">(</span><span class="n">calculator</span><span class="o">.</span><span class="n">calculate_power</span><span class="p">)</span>
<span class="n">tool_1</span> <span class="o">=</span> <span class="n">another_calculate_power</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool_0</span><span class="p">,</span> <span class="n">tool_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="tool-schema">
<h3>Tool Schema<a class="headerlink" href="#tool-schema" title="Link to this heading">¶</a></h3>
<p>Each tool has a defined <code class="docutils literal notranslate"><span class="pre">schema</span></code> that specifies the expected structure and types of its input parameters. This schema is useful for understanding how to properly use the tool and what parameters are required. Here’s an example of how you can view the schema:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">run_ipython_cell</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="function-like-tool-design-philosophy">
<h3>Function-like Tool Design Philosophy<a class="headerlink" href="#function-like-tool-design-philosophy" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section explains the design principles behind our tool module. You can skip this section if you’re only interested in practical usage.</p>
</div>
<p>Our tool module is designed with a <strong>function-like interface</strong> that abstracts the complexity of sandbox management while providing maximum flexibility. Here are the key design principles:</p>
<section id="intuitive-function-call-interface">
<h4><strong>1. Intuitive Function Call Interface</strong><a class="headerlink" href="#intuitive-function-call-interface" title="Link to this heading">¶</a></h4>
<p>Our tool module provides a function-like interface, allowing you to call tools with a simple function call.
Tools behave like regular Python functions, making them easy to use and integrate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Simple function-like calls</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_ipython_cell</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;print(&#39;hello world&#39;)&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">tool_instance</span><span class="p">(</span><span class="n">param1</span><span class="o">=</span><span class="s2">&quot;value1&quot;</span><span class="p">,</span> <span class="n">param2</span><span class="o">=</span><span class="s2">&quot;value2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="flexible-sandbox-priority-system">
<h4><strong>2. Flexible Sandbox Priority System</strong><a class="headerlink" href="#flexible-sandbox-priority-system" title="Link to this heading">¶</a></h4>
<p>The tool module supports three levels of sandbox specification with clear priority:</p>
<ul class="simple">
<li><p><strong>Temporary sandbox</strong> (highest priority, specified during initialization): <code class="docutils literal notranslate"><span class="pre">tool(sandbox=temp_sandbox,</span> <span class="pre">**kwargs)</span></code></p></li>
<li><p><strong>Instance-bound sandbox</strong> (second priority, specified through the binding method): <code class="docutils literal notranslate"><span class="pre">bound_tool</span> <span class="pre">=</span> <span class="pre">tool.bind(sandbox)</span></code></p></li>
<li><p><strong>Dry-run mode</strong> (lowest priority, no sandbox specified): Automatically creates temporary sandbox when none specified</p></li>
</ul>
</section>
<section id="immutable-binding-pattern">
<h4><strong>3. Immutable Binding Pattern</strong><a class="headerlink" href="#immutable-binding-pattern" title="Link to this heading">¶</a></h4>
<p>The bind method creates new tool instances rather than modifying existing ones:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a new instance, original tool remains unchanged</span>
<span class="n">bound_tool</span> <span class="o">=</span> <span class="n">original_tool</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">sandbox</span><span class="o">=</span><span class="n">my_sandbox</span><span class="p">)</span>
</pre></div>
</div>
<p>This ensures thread safety and allows multiple sandbox-bound versions of the same tool to coexist.</p>
</section>
</section>
</section>
<section id="sandbox-usage">
<h2>Sandbox Usage<a class="headerlink" href="#sandbox-usage" title="Link to this heading">¶</a></h2>
<section id="create-a-sandbox">
<h3>Create a Sandbox<a class="headerlink" href="#create-a-sandbox" title="Link to this heading">¶</a></h3>
<p>The previous section introduced tool-centered usage methods, while this section introduces sandbox-centered usage methods.</p>
<p>You can create different types of sandboxes via <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> sdk:</p>
<ul class="simple">
<li><p><strong>BaseSandbox</strong>: Basic sandbox for Python code execution and shell commands.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSandbox</span>

<span class="c1"># Create a base sandbox</span>
<span class="k">with</span> <span class="n">BaseSandbox</span><span class="p">()</span> <span class="k">as</span> <span class="n">box</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">list_tools</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">run_ipython_cell</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;print(&#39;hi&#39;)&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">run_shell_command</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s2">&quot;echo hello&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>FilesystemSandbox</strong>: Sandbox with file system operations support.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox</span><span class="w"> </span><span class="kn">import</span> <span class="n">FilesystemSandbox</span>

<span class="c1"># Create a filesystem sandbox</span>
<span class="k">with</span> <span class="n">FilesystemSandbox</span><span class="p">()</span> <span class="k">as</span> <span class="n">box</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">list_tools</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">create_directory</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">list_allowed_directories</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>BrowserSandbox</strong>: Sandbox for web automation and browser control powered by <a class="reference external" href="https://github.com/steel-dev/steel-browser">Steel Browser</a>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox</span><span class="w"> </span><span class="kn">import</span> <span class="n">BrowserSandbox</span>

<span class="c1"># Create a browser sandbox</span>
<span class="k">with</span> <span class="n">BrowserSandbox</span><span class="p">()</span> <span class="k">as</span> <span class="n">box</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">list_tools</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">browser_navigate</span><span class="p">(</span><span class="s2">&quot;https://www.example.com/&quot;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">browser_snapshot</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>TrainingSandbox</strong>: Sandbox for training and evaluation，please refer to <a class="reference internal" href="training_sandbox.html"><span class="doc">Training Sandbox</span></a> for details。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox</span><span class="w"> </span><span class="kn">import</span> <span class="n">TrainingSandbox</span>

<span class="c1"># Create a training sandbox</span>
<span class="k">with</span> <span class="n">TrainingSandbox</span><span class="p">()</span> <span class="k">as</span> <span class="n">box</span><span class="p">:</span>
    <span class="n">profile_list</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">get_env_profile</span><span class="p">(</span><span class="n">env_type</span><span class="o">=</span><span class="s2">&quot;appworld&quot;</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s2">&quot;train&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">profile_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We’ll be expanding with more types of sandboxes soon—stay tuned!</p>
</div>
</section>
<section id="add-mcp-server-to-sandbox">
<h3>Add MCP Server to Sandbox<a class="headerlink" href="#add-mcp-server-to-sandbox" title="Link to this heading">¶</a></h3>
<p>MCP (Model Context Protocol) is a standardized protocol that enables AI applications to connect to external data sources and tools securely. By integrating MCP servers into your sandbox, you can extend the sandbox’s capabilities with specialized tools and services without compromising security.</p>
<p>The sandbox supports integrating MCP servers via the <code class="docutils literal notranslate"><span class="pre">add_mcp_servers</span></code> method. Once added, you can discover available tools using <code class="docutils literal notranslate"><span class="pre">list_tools</span></code> and execute them with <code class="docutils literal notranslate"><span class="pre">call_tool</span></code>. Here’s an example of adding a time server that provides timezone-aware time functions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">BaseSandbox</span><span class="p">()</span> <span class="k">as</span> <span class="n">sandbox</span><span class="p">:</span>
    <span class="n">mcp_server_configs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;mcpServers&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;uvx&quot;</span><span class="p">,</span>
                <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;mcp-server-time&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;--local-timezone=America/New_York&quot;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="c1"># Add the MCP server to the sandbox</span>
    <span class="n">sandbox</span><span class="o">.</span><span class="n">add_mcp_servers</span><span class="p">(</span><span class="n">server_configs</span><span class="o">=</span><span class="n">mcp_server_configs</span><span class="p">)</span>

    <span class="c1"># List all available tools (now includes MCP tools)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sandbox</span><span class="o">.</span><span class="n">list_tools</span><span class="p">())</span>

    <span class="c1"># Use the time tool provided by the MCP server</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="n">sandbox</span><span class="o">.</span><span class="n">call_tool</span><span class="p">(</span>
            <span class="s2">&quot;get_current_time&quot;</span><span class="p">,</span>
            <span class="n">arguments</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;timezone&quot;</span><span class="p">:</span> <span class="s2">&quot;America/New_York&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="connect-to-remote-sandbox">
<h3>Connect to Remote Sandbox<a class="headerlink" href="#connect-to-remote-sandbox" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remote deployment is beneficial for:</p>
<ul class="simple">
<li><p>Separating comput-intensive tasks to dedicated servers</p></li>
<li><p>Multiple clients sharing the same sandbox environment</p></li>
<li><p>Developing on resource-constrained local machines while executing on high-performance servers</p></li>
<li><p>Deploy sandbox server with K8S</p></li>
</ul>
<p>For more advanced usage of sandbox-server, please refer to <a class="reference internal" href="sandbox_advanced.html"><span class="doc">Advanced Usage of Tool Sandbox</span></a> for detailed instructions.</p>
</div>
<p>You can start the sandbox server on your local machine or different machines for convenient remote access. You should start a sandbox server via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>runtime-sandbox-server
</pre></div>
</div>
<p>To connect to the remote sandbox service, pass in <code class="docutils literal notranslate"><span class="pre">base_url</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Connect to remote sandbox server (replace with actual server IP)</span>
<span class="k">with</span> <span class="n">BaseSandbox</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;http://your_IP_address:8000&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">box</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">box</span><span class="o">.</span><span class="n">run_ipython_cell</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;print(&#39;hi&#39;)&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
<section id="tool-list">
<h2>Tool List<a class="headerlink" href="#tool-list" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Base Tools (Available in all sandbox types)</p></li>
<li><p>Browser Tools (Available in <code class="docutils literal notranslate"><span class="pre">BrowserSandbox</span></code>)</p></li>
<li><p>Filesystem Tools (Available in <code class="docutils literal notranslate"><span class="pre">FilesystemSandbox</span></code>)</p></li>
</ul>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Category</p></th>
<th class="head"><p>Tool Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Base Tools</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">run_ipython_cell(code:</span> <span class="pre">str)</span></code></p></td>
<td><p>Execute Python code in an IPython environment</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">run_shell_command(command:</span> <span class="pre">str)</span></code></p></td>
<td><p>Execute shell commands in the sandbox</p></td>
</tr>
<tr class="row-even"><td><p><strong>Filesystem Tools</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">read_file(path:</span> <span class="pre">str)</span></code></p></td>
<td><p>Read the complete contents of a file</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">read_multiple_files(paths:</span> <span class="pre">list)</span></code></p></td>
<td><p>Read multiple files simultaneously</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">write_file(path:</span> <span class="pre">str,</span> <span class="pre">content:</span> <span class="pre">str)</span></code></p></td>
<td><p>Create or overwrite a file with content</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">edit_file(path:</span> <span class="pre">str,</span> <span class="pre">edits:</span> <span class="pre">list,</span> <span class="pre">dryRun:</span> <span class="pre">bool)</span></code></p></td>
<td><p>Make line-based edits to a text file</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">create_directory(path:</span> <span class="pre">str)</span></code></p></td>
<td><p>Create a new directory</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list_directory(path:</span> <span class="pre">str)</span></code></p></td>
<td><p>List all files and directories in a path</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">directory_tree(path:</span> <span class="pre">str)</span></code></p></td>
<td><p>Get recursive tree view of directory structure</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">move_file(source:</span> <span class="pre">str,</span> <span class="pre">destination:</span> <span class="pre">str)</span></code></p></td>
<td><p>Move or rename files and directories</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">search_files(path:</span> <span class="pre">str,</span> <span class="pre">pattern:</span> <span class="pre">str,</span> <span class="pre">excludePatterns:</span> <span class="pre">list)</span></code></p></td>
<td><p>Search for files matching a pattern</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">get_file_info(path:</span> <span class="pre">str)</span></code></p></td>
<td><p>Get detailed metadata about a file or directory</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list_allowed_directories()</span></code></p></td>
<td><p>List directories the server can access</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Browser Tools</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_navigate(url:</span> <span class="pre">str)</span></code></p></td>
<td><p>Navigate to a specific URL</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_navigate_back()</span></code></p></td>
<td><p>Go back to the previous page</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_navigate_forward()</span></code></p></td>
<td><p>Go forward to the next page</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_close()</span></code></p></td>
<td><p>Close the current browser page</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_resize(width:</span> <span class="pre">int,</span> <span class="pre">height:</span> <span class="pre">int)</span></code></p></td>
<td><p>Resize the browser window</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_click(element:</span> <span class="pre">str,</span> <span class="pre">ref:</span> <span class="pre">str)</span></code></p></td>
<td><p>Click on a web element</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_type(element:</span> <span class="pre">str,</span> <span class="pre">ref:</span> <span class="pre">str,</span> <span class="pre">text:</span> <span class="pre">str,</span> <span class="pre">submit:</span> <span class="pre">bool)</span></code></p></td>
<td><p>Type text into an input field</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_hover(element:</span> <span class="pre">str,</span> <span class="pre">ref:</span> <span class="pre">str)</span></code></p></td>
<td><p>Hover over a web element</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_drag(startElement:</span> <span class="pre">str,</span> <span class="pre">startRef:</span> <span class="pre">str,</span> <span class="pre">endElement:</span> <span class="pre">str,</span> <span class="pre">endRef:</span> <span class="pre">str)</span></code></p></td>
<td><p>Drag and drop between elements</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_select_option(element:</span> <span class="pre">str,</span> <span class="pre">ref:</span> <span class="pre">str,</span> <span class="pre">values:</span> <span class="pre">list)</span></code></p></td>
<td><p>Select options in a dropdown</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_press_key(key:</span> <span class="pre">str)</span></code></p></td>
<td><p>Press a keyboard key</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_file_upload(paths:</span> <span class="pre">list)</span></code></p></td>
<td><p>Upload files to the page</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_snapshot()</span></code></p></td>
<td><p>Capture accessibility snapshot of the current page</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_take_screenshot(raw:</span> <span class="pre">bool,</span> <span class="pre">filename:</span> <span class="pre">str,</span> <span class="pre">element:</span> <span class="pre">str,</span> <span class="pre">ref:</span> <span class="pre">str)</span></code></p></td>
<td><p>Take a screenshot of the page or element</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_pdf_save(filename:</span> <span class="pre">str)</span></code></p></td>
<td><p>Save the current page as PDF</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_tab_list()</span></code></p></td>
<td><p>List all open browser tabs</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_tab_new(url:</span> <span class="pre">str)</span></code></p></td>
<td><p>Open a new tab</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_tab_select(index:</span> <span class="pre">int)</span></code></p></td>
<td><p>Switch to a specific tab</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_tab_close(index:</span> <span class="pre">int)</span></code></p></td>
<td><p>Close a tab (current tab if index not specified)</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_wait_for(time:</span> <span class="pre">int,</span> <span class="pre">text:</span> <span class="pre">str,</span> <span class="pre">textGone:</span> <span class="pre">str)</span></code></p></td>
<td><p>Wait for conditions or time to pass</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_console_messages()</span></code></p></td>
<td><p>Get all console messages from the page</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_network_requests()</span></code></p></td>
<td><p>Get all network requests since page load</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">browser_handle_dialog(accept:</span> <span class="pre">bool,</span> <span class="pre">promptText:</span> <span class="pre">str)</span></code></p></td>
<td><p>Handle browser dialogs (alert, confirm, prompt)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<p>If you encounter any issues while using the browser module, here are some troubleshooting steps:</p>
<section id="docker-connection-error">
<h3>Docker Connection Error<a class="headerlink" href="#docker-connection-error" title="Link to this heading">¶</a></h3>
<p>If you encounter the following error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">DockerException</span><span class="p">:</span> <span class="n">Error</span> <span class="k">while</span> <span class="n">fetching</span> <span class="n">server</span> <span class="n">API</span> <span class="n">version</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Connection aborted.&#39;</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;No such file or directory&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>This error typically indicates that the Docker Python SDK is unable to connect to the Docker service. If you are using Colima, you need to ensure that the Docker Python SDK is configured to use Colima’s Docker service. You can do this by setting the <code class="docutils literal notranslate"><span class="pre">DOCKER_HOST</span></code> environment variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">DOCKER_HOST</span><span class="o">=</span>unix://<span class="nv">$HOME</span>/.colima/docker.sock
</pre></div>
</div>
<p>After setting the <code class="docutils literal notranslate"><span class="pre">DOCKER_HOST</span></code> environment variable, try running your command again. This should resolve the connection issue.</p>
</section>
</section>
<div class="toctree-wrapper compound">
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./en"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sandbox_advanced.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Advanced Usage of Tool Sandbox</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="quickstart.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">3. </span>Quick Start</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Tongyi Lab, Alibaba Inc.
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2025-09-05</div>
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/agentscope-ai/agentscope-runtime" aria-label="GitHub"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>
              <a class="muted-link " href="https://discord.gg/eYMpfnkG8h" aria-label="Discord"><svg stroke="currentColor" fill="currentColor" stroke-width="0" t="1753331148815" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5721" width="200" height="200">
    <path d="M723.903423 359.138018c-69.65045-52.952793-136.256577-51.476757-136.256576-51.476757l-6.088649 7.564685c83.027027 25.738378 121.127207 62.085766 121.127207 62.085766a387.459459 387.459459 0 0 0-145.297297-46.956397 418.179459 418.179459 0 0 0-98.340901 1.752793 73.801802 73.801802 0 0 1-7.564684 1.476036 357.385225 357.385225 0 0 0-110.702703 30.258739 278.786306 278.786306 0 0 0-28.782703 13.653333S353.049369 339.488288 440.873514 313.657658l-4.612613-6.088649s-66.513874-1.476036-136.164324 51.476757A654.252973 654.252973 0 0 0 230.630631 642.167928s40.867748 71.126486 148.341621 73.801802c0 0 16.697658-22.694054 31.827027-40.867748-62.085766-18.45045-84.77982-57.565405-84.77982-57.565405a130.998198 130.998198 0 0 0 13.653334 7.564684s0 1.568288 1.476036 1.568289c1.476036 1.476036 3.044324 1.476036 4.52036 3.044324a238.748829 238.748829 0 0 0 34.779099 16.605405 513.199279 513.199279 0 0 0 71.218739 21.218018 350.558559 350.558559 0 0 0 125.555315 0 329.894054 329.894054 0 0 0 69.650451-21.218018A247.328288 247.328288 0 0 0 702.685405 618.09009s-24.262342 39.391712-87.824144 57.565405c13.653333 18.45045 31.827027 39.299459 31.827027 39.29946 107.473874-2.952072 148.341622-73.801802 146.773334-72.602523a654.990991 654.990991 0 0 0-69.558199-283.214414zM421.131532 596.77982a54.705586 54.705586 0 0 1 0-109.042162 54.705586 54.705586 0 0 1 0 109.042162z m177.124324 0a54.705586 54.705586 0 1 1 49.908468-54.521081 52.491532 52.491532 0 0 1-49.908468 54.521081z" p-id="5722"></path><path d="M512 1024A512 512 0 1 1 1024 512 512.645766 512.645766 0 0 1 512 1024z m0-972.892252a461.261261 461.261261 0 1 0 461.261261 461.261261 461.261261 461.261261 0 0 0-461.261261-461.261261z" p-id="5723"></path>
</svg>
</a>
              <a class="muted-link " href="https://qr.dingtalk.com/action/joingroup?code=v1,k1,OmDlBXpjW+I2vWjKDsjvI9dhcXjGZi3bQiojOq3dlDw=&_dt_no_comment=1&origin=11" aria-label="DingTalk"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
    <path d="M512 0C229.205333 0 0 229.205333 0 512s229.205333 512 512 512 512-229.205333 512-512S794.794667 0 512 0z m237.312 480.810667c-1.109333 4.48-3.712 11.093333-7.424 18.986666h0.128l-0.426667 0.682667c-21.504 46.037333-77.610667 136.106667-77.610666 136.106667l-0.298667-0.597334-16.384 28.501334h79.018667l-150.912 200.917333 34.304-136.533333h-62.208l21.589333-90.282667c-17.493333 4.224-38.101333 10.026667-62.592 17.92 0 0-33.109333 19.370667-95.317333-37.333333 0 0-41.984-36.992-17.578667-46.165334 10.410667-3.925333 50.304-8.917333 81.706667-13.226666 42.410667-5.674667 68.48-8.789333 68.48-8.789334s-130.773333 2.005333-161.792-2.901333c-30.976-4.906667-70.4-56.704-78.805334-102.186667 0 0-12.970667-25.002667 27.904-13.226666 40.917333 11.818667 210.005333 46.08 210.005334 46.08S321.109333 411.434667 306.517333 394.922667c-14.634667-16.469333-43.093333-89.770667-39.424-134.869334 0 0 1.621333-11.221333 13.098667-8.192 0 0 162.602667 74.282667 273.792 114.986667 111.104 40.704 207.786667 61.397333 195.328 114.005333z" opacity=".65" p-id="6077"></path>
</svg>
</a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">4. Tool Sandbox</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#setup">Setup</a><ul>
<li><a class="reference internal" href="#install-dependencies">Install Dependencies</a></li>
<li><a class="reference internal" href="#prepare-the-docker-images">Prepare the Docker Images</a><ul>
<li><a class="reference internal" href="#option-1-pull-all-images-recommended">Option 1: Pull All Images (Recommended)</a></li>
<li><a class="reference internal" href="#option-2-pull-specific-images">Option 2: Pull Specific Images</a></li>
</ul>
</li>
<li><a class="reference internal" href="#verify-installation">Verify Installation</a></li>
<li><a class="reference internal" href="#optional-built-the-docker-images-from-scratch">(Optional) Built the Docker Images from Scratch</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tool-usage">Tool Usage</a><ul>
<li><a class="reference internal" href="#call-a-tool">Call a Tool</a></li>
<li><a class="reference internal" href="#bind-sandbox-to-a-tool">Bind Sandbox to a Tool</a></li>
<li><a class="reference internal" href="#convert-mcp-server-to-tools">Convert MCP Server to Tools</a></li>
<li><a class="reference internal" href="#function-tool">Function Tool</a></li>
<li><a class="reference internal" href="#tool-schema">Tool Schema</a></li>
<li><a class="reference internal" href="#function-like-tool-design-philosophy">Function-like Tool Design Philosophy</a><ul>
<li><a class="reference internal" href="#intuitive-function-call-interface"><strong>1. Intuitive Function Call Interface</strong></a></li>
<li><a class="reference internal" href="#flexible-sandbox-priority-system"><strong>2. Flexible Sandbox Priority System</strong></a></li>
<li><a class="reference internal" href="#immutable-binding-pattern"><strong>3. Immutable Binding Pattern</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#sandbox-usage">Sandbox Usage</a><ul>
<li><a class="reference internal" href="#create-a-sandbox">Create a Sandbox</a></li>
<li><a class="reference internal" href="#add-mcp-server-to-sandbox">Add MCP Server to Sandbox</a></li>
<li><a class="reference internal" href="#connect-to-remote-sandbox">Connect to Remote Sandbox</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tool-list">Tool List</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#docker-connection-error">Docker Connection Error</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=a8e58a58"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script src="../_static/language.js?v=c79991d2"></script>
    </body>
</html>