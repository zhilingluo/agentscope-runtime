<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="5. Deploy a ReAct Agent with Tool Sandbox" href="react_agent.html" /><link rel="prev" title="Advanced Usage of Tool Sandbox" href="sandbox_advanced.html" />
        <link rel="prefetch" href="../_static/logo.svg" as="image" />

    <link rel="shortcut icon" href="../_static/logo.svg"/><!-- Generated with Sphinx 7.4.7 and Furo 2025.07.19 -->
        <title>Training Sandbox - AgentScope Runtime</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c5949056" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  --color-brand-primary: #2196f3;
  --color-brand-content: #2196f3;
  --color-admonition-background: #f8f9fa;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #64b5f6;
  --color-brand-content: #64b5f6;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #64b5f6;
  --color-brand-content: #64b5f6;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="intro.html"><div class="brand"><span style='font-weight: 700; color: #2196f3;'>AgentScope</span> <span style='font-weight: 900; color: #ff5722;'>Runtime</span></div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="intro.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/logo.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text"><span style='font-weight: 700; color: #2196f3;'>AgentScope</span> <span style='font-weight: 900; color: #ff5722;'>Runtime</span></span>
  
</a><div class="language-switch">
    <div class="language-selector">
        <button class="language-button" onclick="toggleLanguageMenu()">
            <span id="current-lang">English</span>
            <span class="dropdown-arrow"></span>
        </button>
        <div class="language-menu" id="language-menu">
            <a href="#" class="language-option" onclick="switchLanguage('en')">English</a>
            <a href="#" class="language-option" onclick="switchLanguage('zh')">中文</a>
        </div>
    </div>
</div>

<script>
    function toggleLanguageMenu() {
        const menu = document.getElementById('language-menu');
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    }

    function switchLanguage(lang, skipRedirect = false) {
        // Save language preference
        localStorage.setItem('preferred-language', lang);

        // Update displayed language const
        currentLang = document.getElementById('current-lang');
        currentLang.textContent = lang === 'zh' ? '中文' : 'English';
        document.body.setAttribute('data-current-lang', lang);
        if (!skipRedirect) {
            const currentPath = window.location.pathname;
            let newPath = null;

            if (lang === 'zh' && currentPath.includes('/en/')) {
                newPath = currentPath.replace('/en/', '/zh/');
            } else if (lang === 'en' && currentPath.includes('/zh/')) {
                newPath = currentPath.replace('/zh/', '/en/');
            }
            if (newPath && newPath !== currentPath) {
                window.location.href = newPath + window.location.search + window.location.hash;
                return;
            }
        }

        // Apply language filtering
        filterContentByLanguage(lang);

        // Close dropdown menu
        document.getElementById('language-menu').style.display = 'none';
    }

    function filterContentByLanguage(lang) {
        const captions = document.querySelectorAll('.caption');
        const toctreeItems = document.querySelectorAll('.toctree-l1');

        // Define which captions should be displayed based on the selected language
        const languageMapping = {
            'en': ['Tutorial', 'API Reference' ],
            'zh': ['简介', '教程', 'API 参考']
        };

        const visibleCaptions = languageMapping[lang] || [];

        // Filter captions based on the selected language
        captions.forEach(caption => {
            const text = caption.textContent.trim();
            caption.style.display = visibleCaptions.includes(text) ? 'block' : 'none';
        });

        // Filter toctree items based on the selected language
        toctreeItems.forEach(item => {
            const link = item.querySelector('a');
            if (link) {
                const href = link.getAttribute('href') || '';
                if (lang === 'zh') {
                    const hasZh = href.includes('/zh/');
                    const hasEn = href.includes('/en/');
                    const isRelative = !href.startsWith('http') && !href.startsWith('/') && !hasEn;

                    item.style.display = (hasZh || isRelative) ? 'block' : 'none';
                } else {
                    const hasZh = href.includes('/zh/');
                    item.style.display = hasZh ? 'none' : 'block';
                }
            } else {
                item.style.display = 'block';
            }
        });
    }

    document.addEventListener('click', function (e) {
        if (!e.target.closest('.language-selector')) {
            document.getElementById('language-menu').style.display = 'none';
        }
    });
</script><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="concept.html">2. Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">3. Quick Start</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="sandbox.html">4. Tool Sandbox</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 4. Tool Sandbox</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sandbox_advanced.html">Advanced Usage of Tool Sandbox</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Training Sandbox</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="react_agent.html">5. Deploy a ReAct Agent with Tool Sandbox</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="protocol.html">6. Agent API Protocol Specification</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 6. Agent API Protocol Specification</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="a2a_support.html">A2A Protocol Support Documentation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="manager.html">7. Manager Module</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 7. Manager Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="context_manager.html">Context Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment_manager.html">Environment Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">8. Tracing Method Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="demohouse.html">9. Demo House</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="contribute.html">10. How to Contribute</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 10. How to Contribute</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="README.html">Contribute to Cookbook</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="api/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="api/sandbox.html">Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/engine.html">Engine</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">简介</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zh/intro.html">0. 介绍</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zh/install.html">1. 安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/concept.html">2. 概念</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/quickstart.html">3. 快速开始</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/sandbox.html">4. 工具沙箱</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 4. 工具沙箱</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/sandbox_advanced.html">工具沙箱高级用法</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zh/training_sandbox.html">训练用沙箱</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../zh/react_agent.html">5. 部署配备工具沙箱的ReAct智能体</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/protocol.html">6. Agent API 协议规范</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of 6. Agent API 协议规范</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/a2a_support.html">A2A 协议支持文档</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/manager.html">7. 管理器模块（Manager Module）</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 7. 管理器模块（Manager Module）</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/context_manager.html">上下文管理器 (Context Manager)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zh/environment_manager.html">环境管理器（Environment Manager）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../zh/tracing.html">8. 执行轨迹追踪</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zh/demohouse.html">9. Demo 展示厅</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/contribute.html">10. 如何贡献</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 10. 如何贡献</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/README.html">参与贡献Cookbook</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API 参考</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../zh/api/index.html">API 参考</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of API 参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../zh/api/sandbox.html">Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zh/api/engine.html">Engine</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/agentscope-ai/agentscope-runtime/blob/main/cookbook/en/training_sandbox.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="training-sandbox">
<h1>Training Sandbox<a class="headerlink" href="#training-sandbox" title="Link to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section introduces the usage of the Training Sandbox. We strongly recommend completing the Docker installation and precautions in the previous tutorial’s foundational section (<a class="reference internal" href="sandbox.html"><span class="doc">Tool Sandbox</span></a>) before proceeding.</p>
</div>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Link to this heading">¶</a></h2>
<p>The Training Sandbox of AgentScope Runtime is primarily designed for training and evaluation functions. The sandbox’s
data is mainly based on public datasets (such as Appworld, Webshop, BFCL, etc.), providing data supply for Agent
training, tools for dataset calling, and real-time Reward verification.</p>
<p>The Training Sandbox primarily implements high-concurrency data calling through Ray, supporting external Agents to
create, execute, and evaluate instances for different samples after sandbox creation.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/StonyBrookNLP/appworld">APPWorld</a>: APPWorld is an advanced, high-fidelity environment designed to test and evaluate autonomous AI agents’ ability to perform complex, multi-step tasks using realistic APIs and user
scenarios. It serves as a crucial testing ground for the AI agents, allowing them to learn and adapt to real-world scenarios.</p></li>
<li><p><a class="reference external" href="https://github.com/ShishirPatil/gorilla">BFCL</a>: Berkeley Function Calling Leaderboard (BFCL) is the first comprehensive and executable function call evaluation dedicated to assessing Large Language Models’ (LLMs) ability to invoke functions. Unlike previous evaluations, BFCL accounts for various forms of function calls, diverse scenarios, and executability.</p></li>
</ul>
</section>
<section id="install">
<h2>Install<a class="headerlink" href="#install" title="Link to this heading">¶</a></h2>
<section id="install-dependency">
<h3>Install Dependency<a class="headerlink" href="#install-dependency" title="Link to this heading">¶</a></h3>
<p>First, install AgentScope Runtime with sandbox support:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;agentscope-runtime[sandbox]&quot;</span>
</pre></div>
</div>
</section>
<section id="appworld-example">
<h3>Appworld Example<a class="headerlink" href="#appworld-example" title="Link to this heading">¶</a></h3>
<section id="prepare-docker-image">
<h4>Prepare Docker Image<a class="headerlink" href="#prepare-docker-image" title="Link to this heading">¶</a></h4>
<p>Pull the image from DockerHub. Suppose you failed to pull the Docker image from DockerHub. In that case, we also provide
a script for building the Docker image locally.</p>
<p>To ensure a complete sandbox experience with all features enabled, follow the steps below to pull and tag the necessary
Docker images from our repository:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Image Source: Alibaba Cloud Container Registry</strong></p>
<p>All Docker images are hosted on Alibaba Cloud Container Registry (ACR) for optimal performance and reliability worldwide. Images are pulled from ACR and tagged with standard names for seamless integration with the AgentScope runtime environment.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pull and tag Appworld ARM64 architecture image</span>
docker<span class="w"> </span>pull<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-appworld:latest-arm64<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>tag<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-appworld:latest-arm64<span class="w"> </span>agentscope/runtime-sandbox-appworld:latest-arm64

<span class="c1"># Pull and tag Appworld X86_64 architecture image</span>
docker<span class="w"> </span>pull<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-appworld:latest<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>tag<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-appworld:latest<span class="w"> </span>agentscope/runtime-sandbox-appworld:latest
</pre></div>
</div>
</section>
<section id="verify-installation">
<h4>Verify Installation<a class="headerlink" href="#verify-installation" title="Link to this heading">¶</a></h4>
<p>You can verify that everything is set up correctly by calling <code class="docutils literal notranslate"><span class="pre">get_env_profile</span></code>. If success, you can get a training ID:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox.box.training_box.training_box</span><span class="w"> </span><span class="kn">import</span> <span class="n">APPWorldSandbox</span>

<span class="o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="n">HEAD</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">APPWorldSandbox</span><span class="p">()</span>
<span class="o">=======</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">APPWorldSandbox</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="n">upstream</span><span class="o">/</span><span class="n">add_bfcl_box</span>
<span class="n">profile_list</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">get_env_profile</span><span class="p">(</span><span class="n">env_type</span><span class="o">=</span><span class="s2">&quot;appworld&quot;</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s2">&quot;train&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">profile_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="optional-build-the-docker-image-from-scratch">
<h4>(Optional) Build the Docker Image from Scratch<a class="headerlink" href="#optional-build-the-docker-image-from-scratch" title="Link to this heading">¶</a></h4>
<p>f you prefer to build images locally via <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> or need custom modifications, you can build them from scratch.
Please refer to <a class="reference internal" href="sandbox_advanced.html"><span class="doc">Advanced Usage of Tool Sandbox</span></a> for detailed instructions.</p>
<p>For training sandboxes, different datasets use different Dockerfiles, located at
<code class="docutils literal notranslate"><span class="pre">src/agentscope_runtime/sandbox/box/training_box/environments/{dataset_name}</span></code>.</p>
<p>For Appworld:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>build<span class="w"> </span>-f<span class="w"> </span>src/agentscope_runtime/sandbox/box/training_box/environments/appworld/Dockerfile<span class="w">     </span>-t<span class="w"> </span>agentscope/runtime-sandbox-appworld:latest<span class="w">     </span>.
</pre></div>
</div>
</section>
<section id="review-dataset-sample">
<h4>Review Dataset Sample<a class="headerlink" href="#review-dataset-sample" title="Link to this heading">¶</a></h4>
<p>After building the Docker image, we first review the dataset samples.</p>
<p>For example, we can use the <code class="docutils literal notranslate"><span class="pre">get_env_profile</span></code>  method to get a list of training IDs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox.box.training_box.training_box</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">APPWorldSandbox</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1">#create training sandbox</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">APPWorldSandbox</span><span class="p">()</span>

<span class="n">profile_list</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">get_env_profile</span><span class="p">(</span><span class="n">env_type</span><span class="o">=</span><span class="s1">&#39;appworld&#39;</span><span class="p">,</span><span class="n">split</span><span class="o">=</span><span class="s1">&#39;train&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">profile_list</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get-training-sample-query">
<h4>Get Training Sample Query<a class="headerlink" href="#get-training-sample-query" title="Link to this heading">¶</a></h4>
<p>We can select one task from the training set as an example and display its query along with the system prompt using
the “create_instance” method.</p>
<p>The initial state will include a unique ID for the newly created instance of the query, and we can generate additional
instances for parallel training.</p>
<p>The prompt (<code class="docutils literal notranslate"><span class="pre">system</span> <span class="pre">prompt</span></code>) and actual question (<code class="docutils literal notranslate"><span class="pre">user</span> <span class="pre">prompt</span></code>) provided by the training set will be returned as a
<code class="docutils literal notranslate"><span class="pre">Message</span> <span class="pre">List</span></code>, located in the state of the return value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">profile_list</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">get_env_profile</span><span class="p">(</span><span class="n">env_type</span><span class="o">=</span><span class="s2">&quot;appworld&quot;</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s2">&quot;train&quot;</span><span class="p">)</span>
<span class="n">init_response</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span>
        <span class="n">env_type</span><span class="o">=</span><span class="s2">&quot;appworld&quot;</span><span class="p">,</span>
        <span class="n">task_id</span><span class="o">=</span><span class="n">profile_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="p">)</span>
<span class="n">instance_id</span> <span class="o">=</span> <span class="n">init_response</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">][</span><span class="s2">&quot;instance_id&quot;</span><span class="p">]</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">init_response</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created instance </span><span class="si">{</span><span class="n">instance_id</span><span class="si">}</span><span class="s2"> with query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

</pre></div>
</div>
</section>
<section id="agent-action-step">
<h4>Agent Action Step<a class="headerlink" href="#agent-action-step" title="Link to this heading">¶</a></h4>
<p>We first feed the initial state information to the LLM agent and then load the response back to the Sandbox. This form
of transmission can be repeated using the step method. Instance_id is required to identify different sessions during the
training or inference processing. A basic reward is provided after each step.</p>
<p>This method currently only supports input in <code class="docutils literal notranslate"><span class="pre">Message</span></code> format, recommended to input with <code class="docutils literal notranslate"><span class="pre">&quot;role&quot;:</span> <span class="pre">&quot;assistant&quot;</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;```python</span><span class="se">\n</span><span class="s2">print(&#39;hello appworld!!&#39;)</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="p">,</span>
    <span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">step</span><span class="p">(</span>
        <span class="n">instance_id</span><span class="o">=</span><span class="n">instance_id</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
    <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</pre></div>
</div>
</section>
<section id="eval-trajectory">
<h4>Eval Trajectory<a class="headerlink" href="#eval-trajectory" title="Link to this heading">¶</a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">evaluate</span></code> method to assess the status of an instance and obtain a <code class="docutils literal notranslate"><span class="pre">Reward</span></code>. Different datasets may have
additional evaluation parameters, passed through <code class="docutils literal notranslate"><span class="pre">params</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">action</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;```python</span><span class="se">\n</span><span class="s2">print(&#39;hello appworld!!&#39;)</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="p">,</span>
    <span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">step</span><span class="p">(</span>
        <span class="n">instance_id</span><span class="o">=</span><span class="n">instance_id</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
    <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="release-sample">
<h4>Release Sample<a class="headerlink" href="#release-sample" title="Link to this heading">¶</a></h4>
<p>You are also allowed to release the cases manually using the release method if needed.
Instances will be auto-released in 5 minutes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">success</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">release_instance</span><span class="p">(</span><span class="n">instance_id</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Instance released: </span><span class="si">{</span><span class="n">success</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="bfcl-example">
<h3>BFCL Example<a class="headerlink" href="#bfcl-example" title="Link to this heading">¶</a></h3>
<section id="id1">
<h4>Prepare Docker Image<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<p>Pull the image from DockerHub. Suppose you failed to pull the Docker image from DockerHub. In that case, we also provide
a script for building the Docker image locally.</p>
<p>To ensure a complete sandbox experience with all features enabled, follow the steps below to pull and tag the necessary
Docker images from our repository:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Image Source: Alibaba Cloud Container Registry</strong></p>
<p>All Docker images are hosted on Alibaba Cloud Container Registry (ACR) for optimal performance and reliability worldwide. Images are pulled from ACR and tagged with standard names for seamless integration with the AgentScope runtime environment.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pull and tag BFCL ARM64 architecture image</span>
docker<span class="w"> </span>pull<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-bfcl:latest-arm64<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>tag<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-bfcl:latest-arm64<span class="w"> </span>agentscope/runtime-sandbox-bfcl:latest-arm64

<span class="c1"># Pull and tag BFCL X86 architecture image</span>
docker<span class="w"> </span>pull<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-bfcl:latest<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>docker<span class="w"> </span>tag<span class="w"> </span>agentscope-registry.ap-southeast-1.cr.aliyuncs.com/agentscope/runtime-sandbox-bfcl:latest<span class="w"> </span>agentscope/runtime-sandbox-bfcl:latest
</pre></div>
</div>
<details><summary> (Optional) Building your own docker image</summary>
At the root folder, run the following code:
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>build<span class="w"> </span>-f<span class="w"> </span>src/agentscope_runtime/sandbox/box/training_box/environments/bfcl/Dockerfile<span class="w">     </span>-t<span class="w"> </span>agentscope/runtime-sandbox-bfcl:latest<span class="w"> </span>.
</pre></div>
</div>
</details>
</section>
<section id="initialize">
<h4>Initialize<a class="headerlink" href="#initialize" title="Link to this heading">¶</a></h4>
<p>BFCL has multiple sub-dataset <em>all, all_scoring, multi_turn, single_turn, live， non_live, non_python, python</em>.
Please determine which subset to test before initializing the sandbox where OPENAPI_API_KEY is required for the evaluaton process.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="c1">#determined the subset and pass the openaikey if you need to step and evalaute samples.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;DATASET_SUB_TYPE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;multi_turn&quot;</span>
<span class="c1"># os.environ[&quot;DATASET_SUB_TYPE&quot;] can be one of the following: &quot;all&quot;,&quot;all_scoring&quot;,&quot;multi_turn&quot;,&quot;single_turn&quot;,&quot;live&quot;,&quot;non_live&quot;,&quot;non_python&quot;,&quot;python&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">agentscope_runtime.sandbox.box.training_box.training_box</span><span class="w"> </span><span class="kn">import</span> <span class="n">BFCLSandbox</span>

<span class="c1">#initialize sandbox</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">BFCLSandbox</span><span class="p">()</span>
<span class="n">profile_list</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">get_env_profile</span><span class="p">(</span><span class="n">env_type</span><span class="o">=</span><span class="s2">&quot;bfcl&quot;</span><span class="p">)</span>
<span class="n">init_response</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span>
    <span class="n">env_type</span><span class="o">=</span><span class="s2">&quot;bfcl&quot;</span><span class="p">,</span>
    <span class="n">task_id</span><span class="o">=</span><span class="n">profile_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">inst_id</span> <span class="o">=</span> <span class="n">init_response</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">][</span><span class="s2">&quot;instance_id&quot;</span><span class="p">]</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">init_response</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4>Agent Action Step<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<p>The following messages are a simulated sample to start the action step:</p>
<details>
<summary>Click to show messages</summary>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">ASSISTANT_MESSAGES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ── Turn-1 ──</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;cd&quot;, &quot;arguments&quot;: {&quot;folder&quot;: &quot;document&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;</span><span class="se">\n</span><span class="s1">&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;mkdir&quot;, &quot;arguments&quot;: {&quot;dir_name&quot;: &quot;temp&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;</span><span class="se">\n</span><span class="s1">&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;mv&quot;, &quot;arguments&quot;: {&quot;source&quot;: &quot;final_report.pdf&quot;, &quot;destination&quot;: &quot;temp&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;ok.1&#39;</span>
    <span class="p">},</span>
    <span class="c1"># ── Turn-2 ──</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;cd&quot;, &quot;arguments&quot;: {&quot;folder&quot;: &quot;temp&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;</span><span class="se">\n</span><span class="s1">&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;grep&quot;, &quot;arguments&quot;: {&quot;file_name&quot;: &quot;final_report.pdf&quot;, &quot;pattern&quot;: &quot;budget analysis&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;ok.2&#39;</span>
    <span class="p">},</span>
    <span class="c1"># ── Turn-3 ──</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;sort&quot;, &quot;arguments&quot;: {&quot;file_name&quot;: &quot;final_report.pdf&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;ok.2&#39;</span>
    <span class="p">},</span>
    <span class="c1"># ── Turn-4 ──</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;cd&quot;, &quot;arguments&quot;: {&quot;folder&quot;: &quot;..&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;</span><span class="se">\n</span><span class="s1">&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;mv&quot;, &quot;arguments&quot;: {&quot;source&quot;: &quot;previous_report.pdf&quot;, &quot;destination&quot;: &quot;temp&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;</span><span class="se">\n</span><span class="s1">&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;cd&quot;, &quot;arguments&quot;: {&quot;folder&quot;: &quot;temp&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;</span><span class="se">\n</span><span class="s1">&lt;tool_call&gt;</span><span class="se">\n</span><span class="s1">{&quot;name&quot;: &quot;diff&quot;, &quot;arguments&quot;: {&quot;file_name1&quot;: &quot;final_report.pdf&quot;, &quot;file_name2&quot;: &quot;previous_report.pdf&quot;}}</span><span class="se">\n</span><span class="s1">&lt;/tool_call&gt;&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s1">&#39;ok.2&#39;</span>
    <span class="p">},</span>
<span class="p">]</span>

</pre></div>
</div>
</details>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">turn_no</span><span class="p">,</span> <span class="n">msg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ASSISTANT_MESSAGES</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">step</span><span class="p">(</span>
        <span class="n">inst_id</span><span class="p">,</span>
        <span class="n">msg</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[TURN </span><span class="si">{</span><span class="n">turn_no</span><span class="si">}</span><span class="s2">] term=</span><span class="si">{</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;is_terminated&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;reward=</span><span class="si">{</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;reward&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2"> state: </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{})</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;is_terminated&quot;</span><span class="p">]:</span>
        <span class="k">break</span>
</pre></div>
</div>
</section>
<section id="evaluate">
<h4>Evaluate<a class="headerlink" href="#evaluate" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">score</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">inst_id</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;sparse&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[RESULT] sparse_score = </span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

</pre></div>
</div>
</section>
<section id="release-instance">
<h4>Release Instance<a class="headerlink" href="#release-instance" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">box</span><span class="o">.</span><span class="n">release_instance</span><span class="p">(</span><span class="n">inst_id</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./en"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="react_agent.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">5. </span>Deploy a ReAct Agent with Tool Sandbox</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="sandbox_advanced.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Advanced Usage of Tool Sandbox</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Tongyi Lab, Alibaba Inc.
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2025-09-01</div>
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/agentscope-ai/agentscope-runtime" aria-label="GitHub"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>
              <a class="muted-link " href="https://discord.gg/eYMpfnkG8h" aria-label="Discord"><svg stroke="currentColor" fill="currentColor" stroke-width="0" t="1753331148815" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5721" width="200" height="200">
    <path d="M723.903423 359.138018c-69.65045-52.952793-136.256577-51.476757-136.256576-51.476757l-6.088649 7.564685c83.027027 25.738378 121.127207 62.085766 121.127207 62.085766a387.459459 387.459459 0 0 0-145.297297-46.956397 418.179459 418.179459 0 0 0-98.340901 1.752793 73.801802 73.801802 0 0 1-7.564684 1.476036 357.385225 357.385225 0 0 0-110.702703 30.258739 278.786306 278.786306 0 0 0-28.782703 13.653333S353.049369 339.488288 440.873514 313.657658l-4.612613-6.088649s-66.513874-1.476036-136.164324 51.476757A654.252973 654.252973 0 0 0 230.630631 642.167928s40.867748 71.126486 148.341621 73.801802c0 0 16.697658-22.694054 31.827027-40.867748-62.085766-18.45045-84.77982-57.565405-84.77982-57.565405a130.998198 130.998198 0 0 0 13.653334 7.564684s0 1.568288 1.476036 1.568289c1.476036 1.476036 3.044324 1.476036 4.52036 3.044324a238.748829 238.748829 0 0 0 34.779099 16.605405 513.199279 513.199279 0 0 0 71.218739 21.218018 350.558559 350.558559 0 0 0 125.555315 0 329.894054 329.894054 0 0 0 69.650451-21.218018A247.328288 247.328288 0 0 0 702.685405 618.09009s-24.262342 39.391712-87.824144 57.565405c13.653333 18.45045 31.827027 39.299459 31.827027 39.29946 107.473874-2.952072 148.341622-73.801802 146.773334-72.602523a654.990991 654.990991 0 0 0-69.558199-283.214414zM421.131532 596.77982a54.705586 54.705586 0 0 1 0-109.042162 54.705586 54.705586 0 0 1 0 109.042162z m177.124324 0a54.705586 54.705586 0 1 1 49.908468-54.521081 52.491532 52.491532 0 0 1-49.908468 54.521081z" p-id="5722"></path><path d="M512 1024A512 512 0 1 1 1024 512 512.645766 512.645766 0 0 1 512 1024z m0-972.892252a461.261261 461.261261 0 1 0 461.261261 461.261261 461.261261 461.261261 0 0 0-461.261261-461.261261z" p-id="5723"></path>
</svg>
</a>
              <a class="muted-link " href="https://qr.dingtalk.com/action/joingroup?code=v1,k1,OmDlBXpjW+I2vWjKDsjvI9dhcXjGZi3bQiojOq3dlDw=&_dt_no_comment=1&origin=11" aria-label="DingTalk"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
    <path d="M512 0C229.205333 0 0 229.205333 0 512s229.205333 512 512 512 512-229.205333 512-512S794.794667 0 512 0z m237.312 480.810667c-1.109333 4.48-3.712 11.093333-7.424 18.986666h0.128l-0.426667 0.682667c-21.504 46.037333-77.610667 136.106667-77.610666 136.106667l-0.298667-0.597334-16.384 28.501334h79.018667l-150.912 200.917333 34.304-136.533333h-62.208l21.589333-90.282667c-17.493333 4.224-38.101333 10.026667-62.592 17.92 0 0-33.109333 19.370667-95.317333-37.333333 0 0-41.984-36.992-17.578667-46.165334 10.410667-3.925333 50.304-8.917333 81.706667-13.226666 42.410667-5.674667 68.48-8.789333 68.48-8.789334s-130.773333 2.005333-161.792-2.901333c-30.976-4.906667-70.4-56.704-78.805334-102.186667 0 0-12.970667-25.002667 27.904-13.226666 40.917333 11.818667 210.005333 46.08 210.005334 46.08S321.109333 411.434667 306.517333 394.922667c-14.634667-16.469333-43.093333-89.770667-39.424-134.869334 0 0 1.621333-11.221333 13.098667-8.192 0 0 162.602667 74.282667 273.792 114.986667 111.104 40.704 207.786667 61.397333 195.328 114.005333z" opacity=".65" p-id="6077"></path>
</svg>
</a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Training Sandbox</a><ul>
<li><a class="reference internal" href="#background">Background</a></li>
<li><a class="reference internal" href="#install">Install</a><ul>
<li><a class="reference internal" href="#install-dependency">Install Dependency</a></li>
<li><a class="reference internal" href="#appworld-example">Appworld Example</a><ul>
<li><a class="reference internal" href="#prepare-docker-image">Prepare Docker Image</a></li>
<li><a class="reference internal" href="#verify-installation">Verify Installation</a></li>
<li><a class="reference internal" href="#optional-build-the-docker-image-from-scratch">(Optional) Build the Docker Image from Scratch</a></li>
<li><a class="reference internal" href="#review-dataset-sample">Review Dataset Sample</a></li>
<li><a class="reference internal" href="#get-training-sample-query">Get Training Sample Query</a></li>
<li><a class="reference internal" href="#agent-action-step">Agent Action Step</a></li>
<li><a class="reference internal" href="#eval-trajectory">Eval Trajectory</a></li>
<li><a class="reference internal" href="#release-sample">Release Sample</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bfcl-example">BFCL Example</a><ul>
<li><a class="reference internal" href="#id1">Prepare Docker Image</a></li>
<li><a class="reference internal" href="#initialize">Initialize</a></li>
<li><a class="reference internal" href="#id2">Agent Action Step</a></li>
<li><a class="reference internal" href="#evaluate">Evaluate</a></li>
<li><a class="reference internal" href="#release-instance">Release Instance</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=a8e58a58"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script src="../_static/language.js?v=c79991d2"></script>
    </body>
</html>